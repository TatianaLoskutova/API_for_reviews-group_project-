# API for reviews service

### Разработчик проекта: Лоскутова Татьяна (Loskutova Tatiana)

### Назначение проекта
Данный проект представляет собой API для работы с web приложение YaMDb. Он предоставляет возможность пользователям публиковать отзывы на различные произведения, оставлять комментарии под своими и чужими отзывами. Получать информацию о произведениях и жанрах. Редактировать свои отзывы и комментарии. Просмотр информации доступен всем пользователям, но манипулировать отзывами и комментариями может только их автор. Создание произведений и жанров не доступно пользователям, их может создать только admin. Сами произведения в YaMDb не хранятся, здесь нельзя посмотреть фильм или послушать музыку.

### Технологический стек
- Python - основной язык программирования.
- Django - фреймворк для разработки веб-приложений.
- Django REST framework - инструмент для создания веб-API на основе Django.
- GIT - система контроля версий проекта
- Pytest - инструмент для тестирования проекта

### Как запустить проект:

**1)** Клонировать репозиторий и перейти в него в командной строке:

    git clone https://github.com/TatianaLoskutova/Drf_group_project

    cd api_yamdb

**2)** Cоздать и активировать виртуальное окружение:
    
    python -m venv venv

    venv/Scripts/activate

**3)** Установить зависимости из файла requirements.txt:
    
    python -m pip install --upgrade pip

    pip install -r requirements.txt

**4)** Выполнить миграции:
    
    cd api_yamdb

    python manage.py migrate
    
**5)** Запустить проект:

    python manage.py runserver


   ### Описание API:

**users**
Создание новых пользователей. Редактирование пользователей, частичное редактирование, удаление. Полученние и изменение данных своей учетной записии.

**categories**
Создание, редактирование, удаление категорий (типов произведений) только админом. Получения списка всех категорий дотспуен всем. Одно произведение может быть привязано только к одной категории.

**genres**
Создание, редактирование, удаление жанров только админом. Получения списка всех жанров дотспуен всем. Одно произведение может быть привязано к нескольким жанрам.

**reviews**
Отзывы на произведения. Отзыв привязан к определённому произведению.

**comments**
Комментарии к отзывам. Комментарий привязан к определённому отзыву.

**titles**
Произведения, к которым пишут отзывы (определённый фильм, книга или песенка). Нельзя добавлять произведения, которые еще не вышли (год выпуска не может быть больше текущего). При добавлении нового произведения требуется указать уже существующие категорию и жанр. Редактирование и добавление только админом, список произведений доступен всем.

**JWT** Аутентификация и авторизация

**Создание пользователя администратором**
Пользователей создаёт администратор — через админ-зону сайта или через POST-запрос. При создании пользователя не предполагается автоматическая отправка письма пользователю с кодом подтверждения. 
После этого пользователь должен самостоятельно отправить свой email и username на эндпоинт /api/v1/auth/signup/ , в ответ ему должно прийти письмо с кодом подтверждения. Далее пользователь отправляет POST-запрос с параметрами username и confirmation_code на эндпоинт /api/v1/auth/token/, в ответе на запрос ему приходит token (JWT-токен), как и при самостоятельной регистрации.

**Самостоятельная регистрация новых пользователей**
Пользователь отправляет POST-запрос с параметрами email и username на эндпоинт /api/v1/auth/signup/.
Сервис YaMDB отправляет письмо с кодом подтверждения (confirmation_code) на указанный адрес email.
Пользователь отправляет POST-запрос с параметрами username и confirmation_code на эндпоинт /api/v1/auth/token/, в ответе на запрос ему приходит token (JWT-токен).

**Пользовательские роли и права доступа**
- Аноним — может просматривать описания произведений, читать отзывы и комментарии.
- Аутентифицированный пользователь (user) — может читать всё, как и Аноним, может публиковать отзывы и ставить оценки произведениям (фильмам/книгам/песенкам), может комментировать отзывы; может редактировать и удалять свои отзывы и комментарии, редактировать свои оценки произведений. Эта роль присваивается по умолчанию каждому новому пользователю.
- Модератор (moderator) — те же права, что и у Аутентифицированного пользователя, плюс право удалять и редактировать любые отзывы и комментарии.
- Администратор (admin) — полные права на управление всем контентом проекта. Может создавать и удалять произведения, категории и жанры. Может назначать роли пользователям.
- Суперюзер Django должен всегда обладать правами администратора, пользователя с правами admin. Даже если изменить пользовательскую роль суперюзера — это не лишит его прав администратора. Суперюзер — всегда администратор, но администратор — не обязательно суперюзер.

 ### Примеры:

**GET запрос на получение всех пользователей на эндпоинт**
http://127.0.0.1:8000/api/v1/users/
Response: код 200
{
  "count": 0,
  "next": "string",
  "previous": "string",
  "results": [
    {
      "username": "string",
      "email": "user@example.com",
      "first_name": "string",
      "last_name": "string",
      "bio": "string",
      "role": "user"
    }
  ]
}

**POST запрос добавление пользователя**
http://127.0.0.1:8000/api/v1/users/
Payload:
{
  "username": "string",
  "email": "user@example.com",
  "first_name": "string",
  "last_name": "string",
  "bio": "string",
  "role": "user"
}
Response: 201
{
  "username": "string",
  "email": "user@example.com",
  "first_name": "string",
  "last_name": "string",
  "bio": "string",
  "role": "user"
}
